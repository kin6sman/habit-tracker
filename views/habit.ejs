<!-- Stylesheets -->
<link rel="stylesheet" href="/css/habit.css" />
<link rel="stylesheet" href="/css/home.css" />
<!-- Habit Name -->
<div>
  <h1 class="habit-name"><%=habits.habitName%></h1>
</div>

<!-- Making Habit Details... -->
<div class="habbit-display__width">
  <ul class="habit-list">
    <li class="with-weekly">
      <% for(let details of habit){%>
      <div class="habit-list-items">
        <%let currentDate = new Date(); let dd = currentDate.getDate(); let mm =
        currentDate.getMonth() + 1; const yyyy = currentDate.getFullYear(); if
        (dd < 10) dd = '0' + dd; if (mm < 10) mm = '0' + mm; let today = dd +
        '/' + mm + '/' + yyyy; let found; let status;
        details.dates.find(function(item){ if(item.date === today) { found =
        true; status = item.complete; } }); %>

        <div id="symbol">
          <i class="fas fa-check-circle"></i>
          -Done&emsp;&emsp;
          <i class="fas fa-times-circle"></i>
          -Not Done&emsp;&emsp;
          <i class="fas fa-minus-circle"></i>
          -Unmarked&emsp;&emsp;
         
        </div>

        <!-- <a
          href="/update-db-date/?id=<%= details._id %>&date=<%= today %>"
          class="status"
        >
          <% if(found && status==='yes'){ %>
          <i class="fas fa-check-circle"></i>
          <% } else if(found && status==='no'){ %>
          <i class="fas fa-times-circle"></i>
          <% } else { %>
          <i class="fas fa-minus-circle"></i>
          <% } %>
        </a>
        <div class="habit-list-item-name"><%= details.content %></div>
        <div>
          <a
            href="/users/habit/favorite-habit/?id=<%= details._id %>"
            class="favorite"
          >
            <% if(details.favorite) { %>
            <i class="fa-solid fa-star"></i>
            <% } else { %>
            <i class="fa-regular fa-star"></i>
            <% } %>
          </a>
          <a href="/users/habit/remove/?id=<%= details._id %>" class="remove">
            <i class="fa-solid fa-trash"></i>
          </a> -->
      </div>
</div>
<div class="weekly__container">
  <%for(let d of weeklyDate){%>
  <div class="weekly__date">
    <p><%= d %></p>
    <% 
          let find; 
          let stat; 
          details.dates.find((item) => { if(item.date ===
          d) { find = true; stat = item.complete; } }); %>
    <a href="/update-db-date/?id=<%= details._id %>&date=<%= d %>" class="status">
      <% if(find && stat==='yes'){ %>
      <i class="fas fa-check-circle"></i>
      <% } else if(find && stat==='no'){ %>
      <i class="fas fa-times-circle"></i>
      <% } else { %>
      <i class="fas fa-minus-circle"></i>
      <% } %>
    </a>
  </div>
  <%}%>
      </div>
      <%}%>
  </li>
  </ul>
</div>
<!-- Scripts -->

<script src="/js/habit.js"></script>